<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Vorträge und Workshops von Ralf D. Müller zu Software-Architektur, GenAI und Dokumentation">
    <link rel="canonical" href="talks.html">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Vorträge | Ralf D. Müller">
    <meta property="og:description" content="Vorträge und Workshops zu Software-Architektur, GenAI und Dokumentation">
    <meta property="og:image" content="../images/ralf-mueller.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Vorträge | Ralf D. Müller">
    <meta name="twitter:description" content="Vorträge und Workshops zu Software-Architektur, GenAI und Dokumentation">
    <meta name="twitter:image" content="../images/ralf-mueller.jpg">
    <title>Vorträge | Ralf D. Müller</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="logo">Ralf D. Müller</a>
            <ul class="nav-links">
                <li><a href="../index.html#about">Über mich</a></li>
                <li><a href="../index.html#trainings">Trainings</a></li>
                <li><a href="talks.html" class="active">Vorträge</a></li>
                <li><a href="../index.html#publications">Publikationen</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="../index.html#contact">Kontakt</a></li>
            </ul>
            <button class="mobile-menu-btn" aria-label="Menü öffnen">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Content -->
    <main class="page-content">
        <div class="container">
            <h1>Vorträge & Workshops</h1>
            <p class="page-intro" id="talks-intro">
                Vorträge auf Konferenzen, Meetups und in Unternehmen seit 2015 -
                zu Software-Architektur, Dokumentation, GenAI und Developer Experience.
            </p>

            <!-- Booking CTA -->
            <div class="booking-cta">
                <p>Sie möchten mich für einen Vortrag oder Workshop buchen?</p>
                <a href="../index.html#contact" class="btn btn-primary">Kontakt aufnehmen</a>
            </div>

            <!-- Year Tabs -->
            <div class="year-tabs">
                <div class="tabs-nav" id="tabs-nav">
                    <!-- Tabs werden dynamisch generiert -->
                </div>
                <div id="tabs-content">
                    <!-- Inhalte werden dynamisch generiert -->
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; <span class="current-year">2026</span> Ralf D. Müller. Alle Rechte vorbehalten.</p>
            <nav class="footer-nav">
                <a href="impressum.html">Impressum</a>
                <a href="datenschutz.html">Datenschutz</a>
            </nav>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    <script>
        // Talks und Konferenzen aus JSON laden und rendern
        (function() {
            const months = ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'];
            function isSafeHttpUrl(url) {
                if (!url || typeof url !== 'string') return false;
                try {
                    const parsed = new URL(url);
                    return parsed.protocol === 'http:' || parsed.protocol === 'https:';
                } catch (e) {
                    return false;
                }
            }

            function isSafeRelativePath(path) {
                return typeof path === 'string' && !path.includes('..') && !path.includes('//') && !path.includes(':');
            }

            // Beide JSONs parallel laden
            Promise.all([
                fetch('../data/talks.json').then(r => r.json()),
                fetch('../data/conferences.json').then(r => r.json())
            ])
            .then(([talks, conferences]) => {
                // Konferenz-Lookup erstellen (alias -> conference)
                const confLookup = {};
                conferences.forEach(conf => {
                    conf.aliases.forEach(alias => {
                        confLookup[alias.toLowerCase()] = conf;
                    });
                });

                // Nach Datum sortieren (neueste zuerst)
                talks.sort((a, b) => new Date(b.date) - new Date(a.date));

                // Nach Jahr gruppieren
                const byYear = {};
                talks.forEach(talk => {
                    const year = talk.date.substring(0, 4);
                    if (!byYear[year]) byYear[year] = [];
                    byYear[year].push(talk);
                });

                const years = Object.keys(byYear).sort((a, b) => b - a);

                // Intro aktualisieren
                document.getElementById('talks-intro').textContent =
                    `Über ${talks.length} Vorträge auf Konferenzen, Meetups und in Unternehmen seit 2015 - zu Software-Architektur, Dokumentation, GenAI und Developer Experience.`;

                // Tabs generieren
                const tabsNav = document.getElementById('tabs-nav');
                const tabsContent = document.getElementById('tabs-content');

                years.forEach((year, index) => {
                    // Tab Button
                    const btn = document.createElement('button');
                    btn.className = 'tab-btn' + (index === 0 ? ' active' : '');
                    btn.setAttribute('data-year', year);
                    btn.textContent = year;
                    tabsNav.appendChild(btn);

                    // Tab Content
                    const content = document.createElement('div');
                    content.className = 'tab-content' + (index === 0 ? ' active' : '');
                    content.setAttribute('data-year', year);

                    const list = document.createElement('div');
                    list.className = 'talks-list';

                    byYear[year].forEach(talk => {
                        const date = new Date(talk.date);
                        const day = String(date.getDate()).padStart(2, '0');
                        const month = months[date.getMonth()];

                        // Konferenz-Logo finden
                        const conf = talk.event ? confLookup[talk.event.toLowerCase()] : null;
                        const logoWrap = document.createElement('div');
                        logoWrap.className = 'talk-logo';
                        if (conf && conf.logo) {
                            const invertedClass = conf.inverted ? ' conf-logo-inverted' : '';
                            // Lokale Pfade anpassen (von pages/ aus)
                            const hasExternalLogo = isSafeHttpUrl(conf.logo);
                            const hasLocalLogo = isSafeRelativePath(conf.logo);
                            if (hasExternalLogo || hasLocalLogo) {
                                const logoSrc = hasExternalLogo ? conf.logo : `../${conf.logo}`;
                                const logo = document.createElement('img');
                                logo.src = logoSrc;
                                logo.alt = conf.name || '';
                                logo.className = `talk-conf-logo${invertedClass}`;
                                logoWrap.appendChild(logo);
                            }
                        }

                        const eventLocation = [talk.event, talk.location].filter(x => x).join(', ');

                        const article = document.createElement('article');
                        article.className = 'talk-item';

                        const dateBox = document.createElement('div');
                        dateBox.className = 'talk-date';
                        const dayEl = document.createElement('span');
                        dayEl.className = 'day';
                        dayEl.textContent = day;
                        const monthEl = document.createElement('span');
                        monthEl.className = 'month';
                        monthEl.textContent = month;
                        dateBox.appendChild(dayEl);
                        dateBox.appendChild(monthEl);

                        const info = document.createElement('div');
                        info.className = 'talk-info';

                        const type = document.createElement('span');
                        type.className = 'talk-type';
                        type.textContent = talk.type || '';
                        info.appendChild(type);

                        const title = document.createElement('h3');
                        title.textContent = talk.title || 'Ohne Titel';
                        info.appendChild(title);

                        if (eventLocation) {
                            const event = document.createElement('p');
                            event.className = 'talk-event';
                            event.textContent = eventLocation;
                            info.appendChild(event);
                        }

                        if (talk.url || talk.video) {
                            const links = document.createElement('div');
                            links.className = 'talk-links';

                            if (talk.url && isSafeHttpUrl(talk.url)) {
                                const eventLink = document.createElement('a');
                                eventLink.href = talk.url;
                                eventLink.target = '_blank';
                                eventLink.rel = 'noopener';
                                eventLink.textContent = 'Event';
                                links.appendChild(eventLink);
                            }
                            if (talk.video && isSafeHttpUrl(talk.video)) {
                                const videoLink = document.createElement('a');
                                videoLink.href = talk.video;
                                videoLink.target = '_blank';
                                videoLink.rel = 'noopener';
                                videoLink.textContent = 'Video';
                                links.appendChild(videoLink);
                            }

                            if (links.childElementCount > 0) {
                                info.appendChild(links);
                            }
                        }

                        article.appendChild(dateBox);
                        article.appendChild(logoWrap);
                        article.appendChild(info);
                        list.appendChild(article);
                    });

                    content.appendChild(list);
                    tabsContent.appendChild(content);
                });

                // Tab-Klick-Handler
                tabsNav.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const year = this.getAttribute('data-year');
                        tabsNav.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                        tabsContent.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        this.classList.add('active');
                        const yearContent = tabsContent.querySelector(`.tab-content[data-year="${year}"]`);
                        if (yearContent) {
                            yearContent.classList.add('active');
                        }
                    });
                });
            })
            .catch(err => console.error('Fehler beim Laden der Talks:', err));
        })();
    </script>
</body>
</html>
